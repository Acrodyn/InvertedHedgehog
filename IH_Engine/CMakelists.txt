project(IH_Engine)

file(GLOB_RECURSE ENGINE_SOURCES "src/**/*.cpp" "src/**/*.h")

add_library(IH_Engine SHARED ${ENGINE_SOURCES})

target_include_directories(IH_Engine PUBLIC 
    $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/src>
    $<INSTALL_INTERFACE:include>
)

target_compile_definitions(IH_Engine PRIVATE IH_ENGINE_EXPORTS)

set_property(GLOBAL PROPERTY USE_FOLDERS ON)

add_subdirectory(IH_Vulkan)

add_subdirectory(third_party/SDL EXCLUDE_FROM_ALL)
target_link_libraries(IH_Engine PRIVATE SDL3::SDL3)
set_target_properties(SDL3-shared PROPERTIES FOLDER "ExternalLibs")
set_target_properties(SDL_uclibc PROPERTIES FOLDER "ExternalLibs")

add_subdirectory(third_party/glm EXCLUDE_FROM_ALL)
target_link_libraries(IH_Engine PRIVATE glm::glm-header-only)

add_subdirectory(third_party/fmt EXCLUDE_FROM_ALL)
target_link_libraries(IH_Engine PRIVATE fmt::fmt)
set_target_properties(fmt PROPERTIES FOLDER "ExternalLibs")

add_subdirectory(third_party/fastgltf EXCLUDE_FROM_ALL)
target_link_libraries(IH_Engine PRIVATE fastgltf::fastgltf)
set_target_properties(fastgltf PROPERTIES FOLDER "ExternalLibs")

file(GLOB_RECURSE STB_HEADERS third_party/stb/*.h)
file(GLOB_RECURSE STB_SOURCES third_party/stb/*.cpp)
add_library(stb STATIC ${STB_HEADERS} ${STB_SOURCES})
target_include_directories(stb PRIVATE third_party/stb)
set_target_properties(stb PROPERTIES FOLDER "ExternalLibs")

file(GLOB_RECURSE IMGUI_HEADERS third_party/imGui/*.h)
file(GLOB_RECURSE IMGUI_SOURCES third_party/imGui/*.cpp)
add_library(imGui STATIC ${IMGUI_HEADERS} ${IMGUI_SOURCES})
target_include_directories(imGui PRIVATE third_party/imGui)
set_target_properties(imGui PROPERTIES FOLDER "ExternalLibs")